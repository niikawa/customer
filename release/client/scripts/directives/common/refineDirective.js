var myApp=angular.module("myApp");myApp.directive("refineDirective",function(){return{restrict:"A",scope:{refineItem:"=",namePropertie:"@",keyword:"=",execute:"&"},replace:!0,link:function(a,b){var c=[];b.on("keyup",function(){0===c.length&&angular.copy(a.refineItem,c);var b=[];if(void 0===a.keyword||0===a.keyword.length)angular.copy(c,b);else for(var d=c.length,e=a.namePropertie.split("|"),f=[],g=Object.keys(c[0]),h=0;d>h;h++)angular.forEach(e,function(d){-1!==c[h][d].indexOf(a.keyword)&&void 0===f[c[h][g[0]]]&&(b.push(angular.copy(c[h])),f[c[h][g[0]]]=!0)});a.$apply(function(){angular.copy(b,a.refineItem)})})}}});