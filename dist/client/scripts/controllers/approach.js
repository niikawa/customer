var approachCtrl=angular.module("approachCtrl",["ApproachServices","ScenarioServices"]);approachCtrl.controller("ApproachCtrl",["$scope","$routeParams","Shared","Utility","Approach","Scenario","Modal",function(a,b,c,d,e,f,g){function h(){a.approach=[],a.scenarioList=[],a.showScenarioList=!1}function i(){e.resource.get().$promise.then(function(b){a.approach=b.data,f.resource.valid().$promise.then(function(b){a.scenarioList=b.data,a.showScenarioList=0<a.scenarioList.length})})}function j(){a.$on("dropItemComplete",function(b,c){a.scenarioList=c.to,a.$apply()})}a.initialize=function(){a._construct(),h(),i(),j(),c.setRoot("approach")},a.save=function(){console.log(a.approach),e.resource.save(a.approach).$promise.then(function(){d.info("設定を更新しました")})},a.savePriority=function(){console.log(a.scenarioList),f.resource.priority({data:a.scenarioList}).$promise.then(function(){d.info("優先順位を更新しました")})},a.showDiscription=function(b){var c=e.getInfomation(b);a.modalParam={title:c.title,message:c.message,isExecute:!1},a.modalInstance=g.open(a,"partials/modal/message.html")},a.bulkInvalid=function(){var b={title:"シナリオの一括無効について",text:"有効なシナリオをすべて無効にしますがよろしいですか？<br>実行した場合、実行予定シナリオはなくなります。",confirmButtonText:"一括で無効にする",execute:function(){f.resource.bulkInvalid().$promise.then(function(){d.info("アプローチ対象シナリオをすべて無効しました。"),a.initialize()})}};d.infoAlert(b)},a.bulkEnable=function(){var b={title:"シナリオの一括有効について",text:"無効なシナリオをすべて有効にしますがよろしいですか？<br>実行した場合、実行予定シナリオとしてダッシュボード画面に表示されます。",isExecute:!0,confirmButtonText:"一括で有効にする",execute:function(){f.resource.bulkEnable().$promise.then(function(){d.info("アプローチ対象シナリオをすべて有効しました。"),a.initialize()})}};d.infoAlert(b)}}]);