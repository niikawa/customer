var myApp=angular.module("myApp");myApp.directive("dragJoinItemDirective",["DDShared",function(a){return{restrict:"AE",transclude:!1,require:"^ngModel",scope:{dragindex:"="},link:function(b,c,d,e){console.log(b.dragindex),c.attr("draggable",!0),c.attr("data-index",b.dragindex),c.on("dragstart",function(b){var d=b.target.dataset.index,f=c.html();b.originalEvent.dataTransfer.setData("item",f),b.originalEvent.dataTransfer.setData("itemIndex",d),a.setFrom(e.$modelValue)})}}}]),myApp.directive("dropJoinDirective",["DDShared",function(a){return{restrict:"A",scope:{},require:"^ngModel",link:function(b,c,d,e){c.on("dragenter",function(){c.addClass("ui-drop-target")}),c.on("dragover",function(b){b.preventDefault(),void 0!==b.target.dataset.index&&a.setOrverIndex(b.target.dataset.index),b.originalEvent.dataTransfer.dropEffect="move"}),c.on("dragleave",function(){c.removeClass("ui-drop-target")}),c.on("drop",function(c){c.preventDefault();var d=c.originalEvent.dataTransfer.getData("itemIndex"),f={};angular.isArray(a.getFrom())?(f=a.getFromCopyByIndex(d),a.getFrom().splice(d,1)):f=a.getCopyFrom();var g=0===e.$modelValue.length?0:a.getOrverIndex();void 0!==f&&e.$modelValue.splice(g,0,f),console.log(e.$modelValue);for(var h=e.$modelValue.length,i=0;h>i;i++)e.$modelValue[i].line=i+1;b.$$phase||b.$apply()})}}}]);