var myApp=angular.module("myApp");myApp.directive("d3Bar",["d3Service","$parse",function(a,b){var c=a.d3;return{restrict:"EAC",scope:{data:"=",key:"@",valueProp:"@",label:"@"},link:function(a,d){var e=c.select(d[0]).append("svg").style("width","100%"),f=c.scale.category20(),g={},h=b(a.key||"id"),i=b(a.valueProp||"value"),j=b(a.label||"name");a.$watchCollection("data",function(){if(a.data){var b=e.selectAll("g.data-group").data(a.data,h),d=b.enter().append("g").classed("data-group",!0).each(function(b){var d=c.select(this);g[h(b)]=a.$watch(function(){return i(b)},function(a){d.select("rect").attr("width",a)})});d.append("rect").attr("x",130).attr("height",18).attr("fill",function(a){return f(a.name)}),d.append("text").text(j).attr("height",15),b.exit().each(function(a){var b=h(a);g[b](),delete g[b]}).remove(),b.each(function(a,b){var d=c.select(this);d.select("rect").attr("y",25*b),d.select("text").attr("y",25*b+15)})}})}}}]);